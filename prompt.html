<!DOCTYPE html>
<html>
<head>
    <title>Hangman!</title>
</head>
<body>
    <h1>Hangman</h1>
    <script>
        // Create an array of words
        var words = [
            "encapsulation",
            "abstraction", 
            "inheritance",
            "polymorphism"
        ];
        // pick a random word
        var word = words[Math.floor(Math.random() * words.length)].toLowerCase();

        // setup answer array
        var answerArray = word.split('').map(() => "_");
        
        // var answerArray = [];
        // for (var i = 0; i < word.length; ++i) {
        //     answerArray[i] = "_";
        // }

        var remainingLetters = word.length;
        
        // the game loop 
        while (remainingLetters > 0) {
            // show player progress
            alert(answerArray.join(" "));
            // prompt player for a guess
            var guess = 
                prompt("Guess a letter, or click Cancel to stop.");
            
            if (guess === null) {
                // exit the game loop
                break;
            } else if (guess.length !== 1) {
                alert("Please enter a single letter.");
            } else {
                // update the game with guess
                var guessInLowerCase = guess.toLowerCase();    
                // for (var j = 0; j < word.length; ++j) {
                //     if (word[j] === guessInLowerCase && answerArray[j] === "_") {
                //         answerArray[j] = guessInLowerCase;
                //         remainingLetters--;
                //     }
                // }
                word.split('').reduce((ans, letter, index)=>{
                    if (letter === guessInLowerCase && ans[index - 1] === "_") {
                        ans[index - 1] = letter;
                        alert(ans);
                        remainingLetters--;
                        alert(remainingLetters);
                        return ans;
                    }
                }, answerArray);
            } 
        }
        // show answer and congratulate the player 
        
        if (remainingLetters === 0) {
            alert("Well done! The word is " + word + ".");
        } else {
            alert("Your guess thus far: " + answerArray.join(" "));
        }
    </script>
</body>
</html>